@model Hm.Admin.Models.WorkOrder.WorkOrderModel
@using Hm.Web.Framework.Extention;
<div id="work_detail_form">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(model => model.WorkOrderCD, new { @class = "popuproletxtbox create_or_update" })
        <div class="divHeader" id="user_lst">
            <div class="accessrgt_add">
                <div class="UIheader" style="margin-bottom:6px;">
                    <div style="width:700px; float:left;"> @(Model.WorkOrderCD == null ? "Create Work Order" : "Update Work Order - " + Model.Subject) </div>
                    <div style="width:50px; padding-right:15px;float:right;"><a href="#" id="btn_AddNew" class="btn_addnew" title="Click to Hide" onclick="window.location.reload();"> Hide </a></div>
                </div>
                <div class="accessrgt_add">
                    <div class="column_divid" id="prop_lst">

                        @if (Model.WorkOrderCD != null)
                        {
                            <div class="divfieldrightrow">
                                <div class="popup_lbl_outer1">
                                    <label title="User Code">
                                        Task ID
                                    </label>
                                </div>
                                <div style="float: left;padding-left: 15px;margin-top: 10px;">
                                    @Html.TextBoxFor(model => model.WorkOrderCD, new { @class = "popuplbldisabled", disabled = "disabled", @readonly = "readonly", Title = "User Code" })
                                    @Html.ValidationMessageFor(model => model.WorkOrderCD)
                                </div>
                            </div>
                        }
                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="Email Id">
                                    Property Code
                                </label>
                                <span class="spanClass">*</span>
                            </div>
                            <div class="divTextbox" style="width: 72% !important;">
                                @Html.DropDownListFor(model => model.PropertyCD, Model.PropertyList, new { @class = "popuproletxtbox fulwdth" })
                                <div style="float: left; margin-left: 192px;">
                                    @Html.ValidationMessageFor(model => model.PropertyCD)
                                </div>
                            </div>
                        </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="Full Name">
                                    Subject
                                </label>
                                <span class="spanClass">*</span>
                            </div>
                            <div class="divTextbox" style="width: 72% !important; ">
                                @Html.TextBoxFor(model => model.Subject, new { @class = "popuproletxtbox", Title = "Full Name", @style = "width:50%; " })<br />
                                <div style="float: left; clear: both; margin-left: 104px; ">
                                    @Html.ValidationMessageFor(model => model.Subject)
                                </div>

                            </div>
                        </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="Email Id">
                                    Category
                                </label>
                                <span class="spanClass">*</span>
                            </div>
                            <div class="divTextbox" style="width: 72% !important;">
                                @Html.DropDownListFor(model => model.Category, Model.CategoryList, "--Select--", new { @class = "popuproletxtbox fulwdth" })
                                <div style="float: left; margin-left: 192px;">
                                    @Html.ValidationMessageFor(model => model.Category)
                                </div>
                            </div>
                        </div>


                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="Gender">
                                    Supplier List
                                </label>
                                <span class="spanClass">*</span>
                            </div>
                            <div class="divTextbox" style="width: 72% !important;">
                                @Html.DropDownListFor(model => model.SupplierId, Model.SupplierList, new { @class = "popuproletxtbox fulwdth" })<br />
                                <div style="float: left; margin-left: 192px;">
                                    @Html.ValidationMessageFor(model => model.SupplierId)
                                </div>
                        </div>
                            </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="Phone">
                                    Address
                                </label>
                            </div>
                            <div class="divTextbox" style="width: 72% !important;">
                                @Html.TextBoxFor(model => model.AddressLine1, new { @class = "popuproletxtbox fulwdth" })
                                @Html.TextBoxFor(model => model.AddressLine2, new { @class = "popuproletxtbox fulwdth" })
                            </div>
                        </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="Address">
                                    PO Number
                                </label>
                            </div>
                            <div class="divTextbox" style="width: 72% !important;">
                                @Html.TextBoxFor(model => model.PONumber, new { @class = "popuproletxtbox", @style = "text-align: right;" })
                            </div>
                        </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="Address">
                                    Work from Date
                                </label>
                                <span class="spanClass">*</span>
                            </div>
                            <div class="divTextbox" style="width: 28% !important;">
                                @Html.TextBoxFor(model => model.WorkFromDate, new { @class = "popuproletxtbox datepicker" })
                            </div>
                        </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="Address">
                                    Work to Date
                                </label>
                                <span class="spanClass">*</span>
                            </div>
                            <div class="divTextbox" style="width: 28% !important;">
                                @Html.TextBoxFor(model => model.WorkToDate, new { @class = "popuproletxtbox datepicker" })
                            </div>
                        </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="City">
                                    Contact Person
                                </label>
                            </div>
                            <div class="divTextbox">
                                @Html.TextBoxFor(model => model.ContactPerson, new { @class = "popuproletxtbox", @style = "width:50%;" })
                            </div>
                            @Html.ValidationMessageFor(model => model.ContactPerson)
                        </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="City">
                                    Work Details
                                </label>
                            </div>
                            <div class="divTextbox">
                                @Html.TextAreaFor(model => model.WorkDetails, new { @class = "popuproletxtbox", @style = "width:100%; height:20%;" })
                            </div>
                            @Html.ValidationMessageFor(model => model.ContactPerson)
                        </div>

                        <div class="divfieldrightrow">
                            <div class="popup_lbl_outer1">
                                <label title="City">
                                    Is Active
                                </label>
                            </div>
                            <div class="divTextbox" style="width:0px;">
                                @Html.CheckBoxFor(model => model.IsActive)
                            </div>
                        </div>
                    </div>

                    <div class="divfieldrightrow">
                        <div class="popup_lbl_outer1">
                            <label title="Gender">
                               Status
                            </label>
                            <span class="spanClass">*</span>
                        </div>
                        <div class="divTextbox" style="width: 72% !important;">
                            @Html.DropDownListFor(model => model.Status, Model.WorkOrderStatusList, new { @class = "popuproletxtbox" })<br />
                            @Html.ValidationMessageFor(model => model.Status)
                        </div>
                    </div>
                  
                  
                    <div style="clear:both;">
                        <br />
                        <br />
                       
                        @Html.Partial("PartialWorkDetails",Model)
                    </div>
                    <div class="divFooter" id="actn_btn">
                        <div class="divFooterStyle">
                            <div class="divStyleForFooter">
                                <div class="submit">
                                    @if (Model.WorkOrderCD == null || Model.WorkOrderCD == "")
                                    {
                                        <input type="button" name="btn_Submit" value="Save" id="btn_Submit_work_order" title="Click to Save " class="button">
                                    }
                                    else
                                    {
                                        <input type="button" name="btn_Submit" value="Update" id="btn_Submit_work_order" title="Click to Update " class="button">
                                    }
                                </div>
                                <div class="divClear">
                                    <input type="reset" name="btnUserClear" value="Clear" title="Click to Clear" class="button">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="divfieldrightrow" style="border-bottom: solid 1px #8cbfe7; color: grey; padding-top: 10px;">
                <div class="modified-info">
                    <div>
                        <ul class="user"><li>Created By:</li><li>@Html.DisplayFor(model => model.CreateUserID, new { style = "width:100px;", @disabled = "disabled", @readonly = "readonly", Title = "Created By" })</li> </ul>
                        <ul class="date"><li>Created Date Time:</li><li>@Html.DisplayFor(model => model.CreateDate, new { style = "width:140px;", @disabled = "disabled", @readonly = "readonly", Title = "Created DateTime" })  </li></ul>
                    </div>
                    <div>
                        <ul class="user"><li>Modified By:</li><li> @Html.DisplayFor(model => model.ModifyUserID, new { style = "width:100px;", @disabled = "disabled", @readonly = "readonly", Title = "Modified By" }) </li></ul>
                        <ul class="date"><li>Modified Date Time:</li><li>@Html.DisplayFor(model => model.ModifyDate, new { style = "width:140px;", @disabled = "disabled", @readonly = "readonly", Title = "Created DateTime" }) </li></ul>
                    </div>
                </div>
            </div>
        </div>
    }
</div>

<style>
    #work_order_details_form table thead {
        background-color: #ebefff;
        height: 50px;
        padding: 10px;
    }

    #work_order_details_form table td {
        padding: 10px;
    }

    #work_order_details_form table tr:nth-child(even) {
        background-color: #ebefff;
    }
</style>
<script>
    $(document).ready(function () {
        showdatetimepicker(".datepicker", "no", "maxdate");

        $("form").removeData("validator").removeData("unobtrusiveValidation");
        $.validator.unobtrusive.parse("form");

        $("#btn_Submit_work_order").click(function () {
            if ($("#work_detail_form form").valid()) {
                model = $("#contentmiddle form").serialize();
               
                $.ajax({
                    url: $(".create_or_update").val() != "" ? '@Url.Action("Update")' : '@Url.Action("Create")',
                    type: "post",
                    dataType: 'json',
                    data: model,
                    success: function (data) {
                        if (data.status == 1) {
                            window.location.reload();
                        }
                        else {
                           
                        }
                    }
                })
            }
        })      
    });
   
</script>


